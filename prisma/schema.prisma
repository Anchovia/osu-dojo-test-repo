generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model User {
  user_id        Int        @id
  username       String     @unique
  reg_data       DateTime   @default(now())
  last_play_date DateTime
  passed_dan     String
  created_at     DateTime   @default(now())
  updated_at     DateTime   @updatedAt
  Dan_logs       Dan_logs[]
}

model Dan_logs {
  user           User     @relation(fields: [user_field_id], references: [user_id])
  user_field_id  Int
  dan            Dan      @relation(fields: [dan_field_id], references: [dan_id])
  dan_field_id   Int
  api_key        String   @id
  score_json     String
  user_use_pause Boolean
  user_use_v2    Boolean
  is_dan_passed  Boolean
  created_at     DateTime @default(now())
  updated_at     DateTime @updatedAt
}

model Dan {
  dan_id        Int        @id
  dan_code      String     @unique
  dan_name      String
  dan_level     String
  cutline       Int
  allowed_modes String
  can_use_pause Boolean
  can_use_v2    Boolean
  clear_member  Int
  try_member    Int
  mapset_id     Int        @unique
  map           Map        @relation(fields: [map_field_id], references: [map_id])
  map_field_id  Int
  created_at    DateTime   @default(now())
  updated_at    DateTime   @updatedAt
  Dan_logs      Dan_logs[]
}

model Map {
  map_id      Int      @id
  mapper_name String
  map_length  String
  difficulty  Float
  avarage_pp  Int
  created_at  DateTime @default(now())
  updated_at  DateTime @updatedAt
  Dan         Dan[]
}
